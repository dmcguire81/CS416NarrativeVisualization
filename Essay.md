# Design of Narrative Visualization

## Topic

The topic on my Narrative Visualization is an examination of [Fuel Efficiency Trends](https://dmcguire81.github.io/CS416NarrativeVisualization/) in the global automobile manufacturing industry, as of 2017. It reuses data made available earlier in the term at [cars2017.csv](https://flunky.github.io/cars2017.csv).

## Elements of Design

### Messaging
The primary message being delivered is that the broad adoption of fully-electric drivetrains, represented in the data as the `electricity` **Fuel Type**, is a step function in the improvement in fuel efficiency, far surpassing the effects of other efforts, like reducing the size (in terms of number of **Engine Cylinders**) and power of engines. The secondary message is that, while Tesla is the face of that evoluation in the industry, many established players actually have superior offerings that are hidden in their portfolio by their "gas guzzlers" (very fuel-inefficent vehicles). Of note is the particularly precient insight that the emerging leader in electric-only fuel efficiency was Hyundai, as of 2017, considering they just made a massive investment in marketing, including a 2022 Super Bowl ad spot, to take on Tesla's dominant market position in the category, head on.

### Narrative Structure
The narrative structure is decidedly a `martini glass`, though, at first glance, it may appear to be an `interactive slide show`. However, by expanding the number of controls that are available to the user as the narrative advances, the result is that each scene has many more configuration options than the previous one, owning to a combinatorial explosion on the input controls. The first scene is obviously the stem, as it has no interactivity (except for a button to advance the scene), the second scene adds 3 configurations, the third scene 3x8=24 configurations, and so forth. The rim of the martini glass, at scene four, has 3x8x13=312 *theoretical* combinations, though the practical number is much smaller, owing to the lack of data at certain cylinder sizes (1, 5, 7, 9, and 11) that would be unintuitive to model for a user (given that 3 *is* a valid cylinder count). Also, there is a correlation between the **Fuel Type** control and **Engine Cylinder** control, in that every vehicle with a **Fuel Type** of `electricity` *also* has a **Engine Cylinder** count of `0`, by convention, meaning that there is no change from restricting the **Engine Cylinder** count when `electricity` is the only **Fuel Type** shown. Therefore, the practical number of combinations is more like 3x(8-1)x(12-5) = 147, which is still almost an order of magnitude more than the previous scene, making for a very *short* and *wide* `martini glass`.

### Visual Structure
The visual structure of the narrative, in each and every scene, is a `horizontal bar chart`, which is a natural choice for data where the independent variable is categorical (automobile manufacturer, or `Make`), and the dependent variable is numerical (average fuel efficiency in various driving conditions: `Average City MPG`, `Average Highway MPG`, and `Average Combined MPG`). Because the fuel efficiency measures are the most important information to be able to compare between the manufacturers, these are encoded as **length** of the bars in the bar chart. The secondary measure for the bar chart, encoded by the *next* most discernible encoding, **color saturation**, shows the **Engine Cylinder** average for the manufacturer, and has a legend at right to assist interpretation.

The horizontal layout of the bar chart is useful for showing the data *sorted* by the measured fuel efficiency, giving the appearance of a leaderboard with an implicit ranking, drawing the viewers attention to the *most* fuel efficient **Make** in each scene, which is a recurring theme. The color, by contrast, is used to highlight useful *differences* between scenes, as the color pallate changes drastically to exclusively the lightest blue (encoding **Engine Cylinder** count `0`) when the **Fuel Type** is restricted to only `electricity`, then transitions to a desaturated (but otherwise representative) version of earlier scenes when the **Engine Cylinder** count is restricted to `4` and below. Each of these is a form a affordance, drawing the user's attentiion to *what* changed, so that they can examine the newly-enabled control and learn *how* to further change the values, via the implicit tutorial.

### Scenes
As mentioned above, the first scene has no interactivity, other than a control to advance the narrative, and this represents the stem of the `martini glass`. At this point, the introduction is highlighting something that most viewers will already be very familiar with; specifically, that Tesla has a dominant position in an area where fully-electric vehicles are known to have a distinct advantage (`Average City MPG`). This gentle introduction (and reiteration of common knowledge) serves to orient the user to the topic. On advancing to the second scene, however, a potentially useful insight is delivered; Tesla's advantage in `Average City MPG` is actually *smaller* than its advantage in `Average Highway MPG`, because, unintuitively, Teslas have *better* fuel efficiency on the highway! This fact is not especially useful for the overall messaging, but serves to introduce the interactivity, and introduces it in a very constrained way, where the chart changes very little in response, so that the control is easy to learn. Advancing to scene three, the primary message is reinforced (fully-electric drivetrains are *vastly* superior in fuel efficiency) and the secondary message is introduced (many other established manufacturers have fully-electric offerings). This information is supplemented by the insight that, when considering fully-electric vehicles as a category, Hyundai is the category leader in fuel efficiency, not Tesla, as espected. While the visual change of the chart is a bit abrupt at this scene, it serves to reinforce the convention that **Fuel Type** `electricity` and **Engine Cylinder** count `0` are linked. Finally, broadening back out to include a less narrowed (but still restricted) offering, by eliminating "gas guzzlers" (vehicles with more than `4` cylinders), there is both a preview of the industry's future, overall, and substantial evidence that betting on smaller petroleum-based engines is a losing proposition, overall. This fact is drawn out in two ways: first, by highlighting the wide fuel efficiency gap between those makes with at least one fully-electric vehicle offering; second, by showing that the tiny-car specialist, `smart`, drops from the top 10 to only the leader among manufacturers *without* a fully-electric offering. Both facts serve to highlight the overall dominance of the fully-electric drivetrain strategy.

### Annotations
The annotations are used to call out either specific bars (scenes one, two, and three) or a group of bars and a single outlier (scene four). In each case, the template is that there is a single datum that is interesting to highlight, but the fourth scene is special, in that the *context* makes the datum interesting, so the surrounding data must also be highlighted. The annotations do not change within a scene, but it would, perhaps, be an interesting extension to transition the annotation in scene four, first highlighting the single datum (`smart`), then the context (manufacturers with at least 1 fully-electric offering), or vice versa.

### Parameters
The parameters of the narrative visualization are introduce a scene at a time. First, in scene two, the **Measure** is parameterized: `Average City MPG`, `Average Highway MPG`, or `Average Combined MPG`. Next, in scene 3, the **Fuel Type** can be restricted, eleminating `diesel`, `electricity`, or `gasoline` (or some combination thereof). Lastly, the **Engine Cylinder** count can be limited, in scene four, encoded as a range from 0 to a max number; a dual slider would have been ideal for this control, but was precluded by the prohibition on libraries like [d3-simple-slider](https://bl.ocks.org/johnwalley/e1d256b81e51da68f7feb632a53c3518).

The states, in support of the `martini glass` narrative structure, essentially serve to enable more interactivity as the narrative progresses. However, at each scene, the state can be used to both *enable* a particular parameter, but also to *fix* it to a value that serves the narrative, by presenting a chart that shows specific data. Specifically, in the second scene, the state not only enables the **Measure** control, but fixes the value of the parameter to `Average Highway MPG`, in order to highlight an interesting property of the fuel efficiency of Teslas. Similarly, the state in scene three enables the restriction of **Fuel Type** via a control, but also restricts the parameter by eliminating `diesel` and `gasoline` options to highlight fully-electric vehicles. Lastly, the state of the fourth scene enables the control to limit the **Engine Cylinder** count, but immediately pins it to `4` to show what an industry without "gas guzzlers" might look like. At each stage, if the user leverages the enabled control to further explore, the annotation used to highlight the information in that scene is removed, as it is only valid for the *fixed* value of the parameter, not for any values that the user might subsequently choose.

### Triggers
Like the parameters, the controls (and associated triggers) are introduced scene-wise. Firstly, the control to move forward or backwards in the narrative is introduced in scene one, and really acts to set the *state* of the visualization, overall, rather than any particular parameter, so is not considered interactive. Still, it has `click` triggers for the forward and backward buttons, and these triggers must be used to set the state, as described above, but also enable/disable buttons, so that the range of valid scenes is not escaped. The affordance on this pair of controls is the universal sign (among left-to-right languages) of a right-arrow for forward/next and a left-arrow for backward/previous. In scene two, being a gentle transition, the only affordance is the change in the drop-down control's value, which is updated to match the newly-changed horizontal axis label to read `Average Highway MPG`. On subsequent `change` triggers of the `dropdown-selection` control, the **Measure** parameter is updated to the selection made by the user, and the chart is updated, accordingly, mirroring the transition that occurs between scenes one and two. Next, on the `change` trigger for the `checkbox-selection` control, enabled in scene three, the list of fuel types that are selected is updated to *remove* recently-checked values, or to *add* unchecked values. Again, the chart is updated to account for the change of the **Fuel Type** parameter. Finally, in scene four, the `slider-range` control is enabled and must field `change` triggers, updating the range of valid **Engine Cylinder** count values in the chart to be representative of the maximum allowed by the value encoded by the slider. As discussed above, for each of the last two scenes, the primary affordance is the change in the `color saturation` in the chart, which can be used to indirectly decode the restriction to `electricity` of the **Fuel Type** parameter in scene three (via the relationship to **Engine Cylinder** count `0`), and to directly decode the restriction to **Engine Cylinder** count `4` in scene four.
